"use strict";(self["webpackChunkfood_pro"]=self["webpackChunkfood_pro"]||[]).push([[903],{3903:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{label:"菜单名称",prop:"input"}},[s("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.input,callback:function(t){e.$set(e.form,"input",t)},expression:"form.input"}})],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入菜单描述信息"},model:{value:e.form.textarea,callback:function(t){e.$set(e.form,"textarea",t)},expression:"form.textarea"}})],1),s("el-form-item",[s("el-upload",{attrs:{action:"http://39.103.66.129:3001/create/upload","list-type":"picture-card",name:"uploadFile","on-success":e.handleAvatarSuccess},scopedSlots:e._u([{key:"file",fn:function(t){var a=t.file;return s("div",{},[s("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),s("span",{staticClass:"el-upload-list__item-actions"},[s("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[s("i",{staticClass:"el-icon-zoom-in"})])])])}}])},[s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg文件，且不超过500kb ")]),s("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),s("el-form-item",[s("el-button",{staticClass:"create",attrs:{type:"danger",disabled:e.open},on:{click:e.onSubmit}},[e._v(" 创建菜单 ")])],1)],1)],1)},l=[],i={data(){return{form:{input:"",textarea:""},rules:{input:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1,img:"",open:!0}},methods:{handleAvatarSuccess(e){console.log(e),this.img=e.urls[0].split("/").pop(),this.open=!1},onSubmit(){const{input:e,textarea:t}=this.form,s=new Date,a=`cname=${e}&cdetail=${t}&cimg=${this.img}&ctime=${s.getTime()/1e3}&username=${this.$store.state.username}`;this.axios.post("/create/store",a).then((e=>{console.log(e),1==e.data.code?(this.$router.push("/center/mycollect"),this.$message({message:"发布成功！！",type:"success"})):this.$message.error("发布失败")}))},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},r=i,o=s(1001),n=(0,o.Z)(r,a,l,!1,null,"f0d958e0",null),u=n.exports}}]);
//# sourceMappingURL=903.73500690.js.map