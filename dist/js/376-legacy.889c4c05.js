"use strict";(self["webpackChunkfood_pro"]=self["webpackChunkfood_pro"]||[]).push([[376],{92376:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.userData?a("div",{staticClass:"recipe"},[a("el-tabs",{staticClass:"tab",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"个人资料",name:"1"}},[a("div",{staticClass:"avatar"},[a("p",[t._v("头像")]),a("img",{attrs:{src:"http://39.103.66.129:3001/"+(t.form.img?t.form.img:t.userData.avatar_image),alt:""}})]),a("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[a("el-form-item",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://39.103.66.129:3001/create/upload",multiple:"",name:"uploadFile","on-success":t.uploadimg}},[a("el-button",{attrs:{size:"small",type:"danger",plain:""}},[t._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{attrs:{fill:"#ff6767"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio-button",{attrs:{label:"男"}}),a("el-radio-button",{attrs:{label:"女"}}),a("el-radio-button",{attrs:{label:"保密"}})],1)],1),a("el-form-item",{staticStyle:{width:"35%"},attrs:{label:"电子邮箱"}},[a("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"个人签名"}},[a("el-input",{model:{value:t.form.signature,callback:function(e){t.$set(t.form,"signature",e)},expression:"form.signature"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:t.setData}},[t._v("保存修改")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"修改密码",name:"2"}},[a("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[a("el-form-item",{staticStyle:{width:"35%"},attrs:{label:"当前密码"}},[a("el-input",{model:{value:t.form.upwd,callback:function(e){t.$set(t.form,"upwd",e)},expression:"form.upwd"}})],1),a("el-form-item",{staticStyle:{width:"35%"},attrs:{label:"新密码"}},[a("el-input",{model:{value:t.form.rpwd,callback:function(e){t.$set(t.form,"rpwd",e)},expression:"form.rpwd"}})],1),a("el-form-item",{staticStyle:{width:"35%"},attrs:{label:"确认密码"}},[a("el-input",{model:{value:t.form.repwd,callback:function(e){t.$set(t.form,"repwd",e)},expression:"form.repwd"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:t.setPwd}},[t._v("保存修改")])],1)],1)],1)],1)],1):t._e()},o=[],s=a(93019),l=(a(92222),a(74916),a(23123),a(34665)),i={data:function(){return{activeName:"1",userData:null,form:{sex:"男",email:"",signature:"",img:"",upwd:"",rpwd:"",repwd:""}}},computed:(0,s.Z)({},(0,l.rn)(["username"])),activated:function(){this.getuserData()},mounted:function(){this.getuserData()},methods:(0,s.Z)((0,s.Z)({},(0,l.OI)(["updataUsername"])),{},{setPwd:function(){var t="create/setpwd",e="upwd=".concat(this.form.upwd,"&repwd=").concat(this.form.repwd,"&username=").concat(this.$store.state.username);""!=this.form.upwd?""!=this.form.rpwd?""!=this.form.repwd?this.form.rpwd==this.form.repwd?this.axios.post(t,e).then((function(t){1==t.data.code?alert("修改成功"):alert("当前密码不正确")})):alert("确认密码不一致"):alert("请输入确认密码"):alert("请输入新密码"):alert("请输入当前密码")},setData:function(){var t=this,e="create/setuser",a="sex=".concat("男"===this.form.sex?1:0,"&email=").concat(this.form.email,"&avatar_img=").concat(this.form.img,"&signature=").concat(this.form.signature,"&username=").concat(this.$store.state.username);this.axios.post(e,a).then((function(e){console.log(e),1==e.data.code&&t.$alert("修改成功","修改成功",{confirmButtonText:"关闭"})}))},uploadimg:function(t,e,a){console.log(t),this.form.img=t.urls[0].split("/").pop(),console.log(this.form.img)},getuserData:function(){var t=this,e="create/user?username=".concat(this.$store.state.username);this.axios.get(e).then((function(e){console.log(e),t.userData=e.data.data[0],t.userData.sex?t.form.sex="男":t.form.sex="女",t.form.email=t.userData.email,t.form.signature=t.userData.signature}))}})},n=i,m=a(1001),u=(0,m.Z)(n,r,o,!1,null,"545d3d9f",null),c=u.exports}}]);
//# sourceMappingURL=376-legacy.889c4c05.js.map